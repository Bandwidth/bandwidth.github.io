{% multimethod %}
{% endmultimethod %}

# Errors during an active call {#top}
Errors that occur during an active call will be delivered to the `disconnectUrl` for outbound calls and `Call status callback URL` for inbound calls in the form of a [Disconnect](bxml/callbacks/disconnect.md) event.  Example errors:
* Invalid BXML returned by a callback
* Unable to reach the callback url
* Callback URL returns a 4XX or 5XX response code
* User rate limits are reached
* System rate limits are reached

# HTTP Error Codes
Categorized error codes generated by the application.

## Overview

* [400 - Bad Request](#http-400)
* [401 - Unauthorized](#http-401)
* [403 - Forbidden](#http-403)
* [404 - Not Found](#http-404)
* [409 - Conflict](#http-409)
* [415 - Invalid Media-Type](#http-415)
* [429 - Too Many Requests](#http-429)
* [500 - Internal Server Error](#http-500)
* [503 - Unavailable](#http-503)


## 400 – BAD_REQUEST {#http-400}

Bandwidth will return a `HTTP-400` Error when the request is malformed or invalid.  See the message of the error for tips before trying again.

{% extendmethod %}

### Validation Errors

| Type       | Message                                                                                         |
|:-----------|:------------------------------------------------------------------------------------------------|
| validation | Invalid to: must be an E164 telephone number                                                    |
| validation | Invalid from: must be an E164 telephone number                                                  |
| validation | Missing at least one required field. Required fields are \[from, to, answerUrl, applicationId\] |
| validation | `${0}` must be within the range \[`${1}`, `${2}`\], but was `${3}`                              |
| validation | Could not create call: sendCallback tag must contain at most `${0}` characters                  |
| validation | Invalid answerUrl: only http and https are allowed                                              |
| validation | Invalid answerUrl method. Supported methods: [POST, GET]                                        |
| validation | Could not create call: Application id `${0}` not found                                          |

{% common %}

### Example: Invalid TO telephone number

```http
POST https://voice.bandwidth.com/api/v2/accounts/{{accountId}}/calls/ HTTP/1.1
Content-Type: application/json; charset=utf-8
Authorization: {user:password}

{
  "from"          : "+19192676804",
  "to"            : "scooby-doo",
  "answerUrl"     : "http://www.myapp.com/hello",
  "applicationId" : "7fc9698a-b04a-468b-9e8f-91238c0d0086"
}
```

#### Responds

```http
HTTP/1.1 400 Bad Request
Content-Type: application/json;charset=UTF-8

{
  "type"        : "validation",
  "description" : "Invalid to: must be an E164 telephone number",
  "id"          : null
}

```


{% endextendmethod %}


## 401 – UNAUTHORIZED {#http-401}

Bandwidth returns a `HTTP-401` Error when the specified user does not have access to the account. Ensure the username and password are correct along with the correct account number. See the [security & credentials guide](../guides/accountCredentials.md) for more information.

{% extendmethod %}

### Authorization Errors

| Type                 | Message                                     |
|:---------------------|:--------------------------------------------|
| authentication-error | The credentials provided were invalid       |
| authentication-error | Invalid basic authentication token          |
| authentication-error | Failed to decode basic authentication token |

{% common %}

### Example: Incorrect credentials sent

```http
POST https://voice.bandwidth.com/api/v2/accounts/{{accountId}}/calls/ HTTP/1.1
Content-Type: application/json; charset=utf-8
Authorization: {user:password}

{
  "from"          : "+19192676804",
  "to"            : "+19195554444",
  "answerUrl"     : "http://www.myapp.com/hello",
  "applicationId" : "7fc9698a-b04a-468b-9e8f-91238c0d0086"
}

```

#### Responds

```http
HTTP/1.1 401 Unauthorized
Content-Type: application/json;charset=UTF-8

{
  "type"        : "authentication-error",
  "description" : "The credentials provided were invalid",
  "id"          : null
}

```

{% endextendmethod %}

## 403 – FORBIDDEN {#http-403}

Bandwidth returns a `HTTP-403` error when the user does not have access to the voice API.

{% extendmethod %}

### Forbidden Errors

| Type                | Message          |
|:--------------------|:-----------------|
| authorization-error | Access is denied |

{% common %}

### Example: User does not have access

```http
POST https://voice.bandwidth.com/api/v2/accounts/{{accountId}}/calls/ HTTP/1.1
Content-Type: application/json; charset=utf-8
Authorization: {user:password}

{
  "from"          : "+19192676804",
  "to"            : "+19195554444",
  "answerUrl"     : "http://www.myapp.com/hello",
  "applicationId" : "7fc9698a-b04a-468b-9e8f-91238c0d0086"
}
```

#### Responds

```http
HTTP/1.1 403 Forbidden
Content-Type: application/json;charset=UTF-8

{
  "type"        : "validation",
  "description" : "Access is denied",
  "id"          : null
}

```

{% endextendmethod %}

## 404 – NOT_FOUND {#http-404}

Bandwidth returns a `HTTP-404` when the call-id is no longer active, or the path is not found. Ensure the call-id of the request is correct and adjust the request path accordingly.

{% extendmethod %}

### Call Not found errors

| Type       | Message                 |
|:-----------|:------------------------|
| validation | Call [`${0}`] not found |

### Path nonexistent Error Schema

| Value     | Description            | Example                        |
|:----------|:-----------------------|:-------------------------------|
| timestamp | Time error Occurred    | `2019-07-29T17:21:43.751+0000` |
| status    | HTTP Status            | `404`                          |
| error     | Description of error   | `Not found`                    |
| message   | Any more information   | `no message found`             |
| path      | Path that wasn't found | `/peanutbutter`                |

{% common %}

### Example 1 of 2: Updating a call that does not exist

```http
POST https://voice.bandwidth.com/api/v2/accounts/{{accountId}}/calls/{{invalid-call-id}} HTTP/1.1
Content-Type: application/json; charset=utf-8
Authorization: {user:password}

{
  "from"          : "+19192676804",
  "to"            : "+19195554444",
  "answerUrl"     : "http://www.myapp.com/hello",
  "applicationId" : "7fc9698a-b04a-468b-9e8f-91238c0d0086"
}
```

#### Responds

```http
HTTP/1.1 404 Not Found
Content-Type: application/json;charset=UTF-8

{
  "type"        : "validation",
  "description" : "Call [{{invalid-call-id}}] not found",
  "id"          : null
}

```

### Example 2 of 2: Path does not exist

```http
POST https://voice.bandwidth.com/api/v2/accounts/{{accountId}}/calls/ HTTP/1.1
Content-Type: application/json; charset=utf-8
Authorization: {user:password}

{
  "from"          : "+19192676804",
  "to"            : "+19195554444",
  "answerUrl"     : "http://www.myapp.com/hello",
  "applicationId" : "7fc9698a-b04a-468b-9e8f-91238c0d0086"
}
```

#### Responds

```http
HTTP/1.1 404 Not Found
Content-Type: application/json;charset=UTF-8

{
  "timestamp" : "2019-07-29T17:21:43.751+0000",
  "status"    : 404,
  "error"     : "Not Found",
  "message"   : "No message available",
  "path"      : "/peanutbutter"
}

```

{% endextendmethod %}

## 409 – CONFLICT {#http-409}

Bandwidth returns a `HTTP-409` error when modifying a call that is unable to be modified. Such as a recently ended call or a call that has yet to be answered.

{% extendmethod %}


| Type       | Message                                               |
|:-----------|:------------------------------------------------------|
| validation | Call [`${0}`] cannot be modified in its current state |

{% common %}

### Example: Modifying a recently ended call

```http
POST https://voice.bandwidth.com/api/v2/accounts/{{accountId}}/calls/{{call-id}} HTTP/1.1
Content-Type: application/json; charset=utf-8
Authorization: {user:password}

{
  "state" : "completed"
}
```

#### Responds

```http
HTTP/1.1 409 Conflict
Content-Type: application/json;charset=UTF-8

{
  "type"        : "validation",
  "description" : "Call [{{call-id}}] cannot be modified in its current state",
  "id"          : ""
}

```

{% endextendmethod %}

## 415 - UNSUPPORTED MEDIA TYPE {#http-415}

Bandwidth returns a `HTTP-415` error when the content-type of the request is incorrect. Ensure the request header contains `Content-Type: application/json; charset=utf-8` and try again.

{% extendmethod %}


| Type       | Message                           |
|:-----------|:----------------------------------|
| validation | Content type `${0}` not supported |

{% common %}

### Example: No Content-Type included

```http
POST https://voice.bandwidth.com/api/v2/accounts/{{accountId}}/calls/ HTTP/1.1
Authorization: {user:password}

{
  "from"          : "+19192676804",
  "to"            : "+19195554444",
  "answerUrl"     : "http://www.myapp.com/hello",
  "applicationId" : "7fc9698a-b04a-468b-9e8f-91238c0d0086"
}
```

#### Responds

```http
HTTP/1.1 415 Unsupported Media Type
Content-Type: application/json;charset=UTF-8

{
  "type"        : "validation",
  "description" : "Content type 'text/plain;charset=UTF-8' not supported",
  "id"          : null
}

```

{% endextendmethod %}

## 429 - TOO MANY REQUESTS {#http-429}

Bandwidth returns a `HTTP-429` error when the rate limit has been reached.

{% extendmethod %}


| Type  | Message                                       |
|:------|:----------------------------------------------|
| error | User rate limit or concurrency limit exceeded |

{% common %}

### Example: No Content-Type included

```http
POST https://voice.bandwidth.com/api/v2/accounts/{{accountId}}/calls/ HTTP/1.1
Content-Type: application/json;charset=UTF-8
Authorization: {user:password}

{
  "from"          : "+19192676804",
  "to"            : "+19195554444",
  "answerUrl"     : "http://www.myapp.com/hello",
  "applicationId" : "7fc9698a-b04a-468b-9e8f-91238c0d0086"
}
```

#### Responds

```http
HTTP/1.1 429 Too Many Requests
Content-Type: application/json;charset=UTF-8

{
  "type"        : "error",
  "description" : "Rate limited due to concurrent call count",
  "id"          : ""
}

```

{% endextendmethod %}

## 500 – BACKEND {#http-500}

Bandwidth will return a `HTTP-500` Error when an unknown error occurs. If you receive a `HTTP-500` error from the Bandwidth Voice API, please open a [support ticket](https://support.bandwidth.com) with the original request and the response returned. Please be sure to remove any passwords or sensitive information from the support ticket.

{% extendmethod %}

### Internal Server Errors

| Type           | Message                            |
|:---------------|:-----------------------------------|
| internal-error | An unknown internal error occurred |


{% common %}

### Example: 500 Returned

```http
POST https://voice.bandwidth.com/api/v2/accounts/{{accountId}}/calls/ HTTP/1.1
Content-Type: application/json; charset=utf-8
Authorization: {user:password}

{
  "from"          : "+19192676804",
  "to"            : "+19195554444",
  "answerUrl"     : "http://www.myapp.com/hello",
  "applicationId" : "7fc9698a-b04a-468b-9e8f-91238c0d0086"
}
```

#### Responds

```http
HTTP/1.1 500 Internal Server Error
Content-Type: application/json;charset=UTF-8

{
  "type"        : "internal-error",
  "description" : "An unknown internal error occurred",
  "id"          : null
}

```

{% endextendmethod %}

## 503 – UNAVAILABLE {#http-503}

Bandwidth will return a `HTTP-503` Error if the service is unavailable for some reason, such as when there are no servers available to serve the request or if the system is at capacity. If you receive a `HTTP-503` error from the Bandwidth Voice API, please try the request again.  If you **continue to receive** `HTTP-503` errors, please open a [support ticket](https://support.bandwidth.com) with the original request and the response returned. Please be sure to remove any passwords or sensitive information from the support ticket.

{% extendmethod %}

### Unavailable Errors

| Type              | Message                            |
|:------------------|:-----------------------------------|
| system-overloaded | Handling too many requests         |
| system-overloaded | Managing too many concurrent calls |

{% common %}

```http
POST https://voice.bandwidth.com/api/v2/accounts/{{accountId}}/calls/ HTTP/1.1
Content-Type: application/json; charset=utf-8
Authorization: {user:password}

{
  "from"          : "+19192676804",
  "to"            : "+19195554444",
  "answerUrl"     : "http://www.myapp.com/hello",
  "applicationId" : "7fc9698a-b04a-468b-9e8f-91238c0d0086"
}
```

#### Responds

```http
HTTP/1.1 503 UNAVAILABLE
Content-Type: application/json;charset=UTF-8

{
  "type"        : "system-overloaded",
  "description" : "Managing too many concurrent calls",
  "id"          : null
}

```

{% endextendmethod %}
